chrome.runtime.onMessage.hasListeners()||chrome.runtime.onMessage.addListener(function(a,c,o){var d,i;const{message:l}=a;switch(l){case"INJECT_BUTTON":const t=((d=document.querySelector('[aria-label="Inbox"]'))==null?void 0:d.parentElement)||((i=document.querySelector('[aria-label="Help"]'))==null?void 0:i.parentElement);if(!document.getElementById("injected_iframe_button")&&t){t.style.display="flex",t.style.flexDirection="row-reverse",t.style.alignItems="center",t.style.justifyContent="center";const e=document.createElement("iframe");e.id="injected_iframe_button",e.src=chrome.runtime.getURL("button_injection.html"),e.scrolling="no",e.width=30,e.height=30,t.appendChild(e)}break;case"INJECT_DIALOG":if(!document.getElementById("injected_dialog")){const e=document.createElement("dialog");e.id="injected_dialog",e.innerHTML="<style>::-webkit-scrollbar{width:5px;}::-webkit-scrollbar-thumb{background:#f1f1f1;}::-webkit-scrollbar-track{background:#888;}</style>",e.style.padding=0,e.style.border="none",e.style.backgroundColor="transparent",e.style.overflow="auto";const n=document.createElement("iframe");n.id="injected_dialog_iframe",n.src=chrome.runtime.getURL("index.html"),n.height="675px",n.width="1250px",e.appendChild(n),document.body.appendChild(e),document.getElementById("injected_dialog").showModal()}break;case"CLOSE_INJECTED_DIALOG":document.getElementById("injected_dialog")&&(document.getElementById("injected_dialog_iframe").remove(),document.getElementById("injected_dialog").remove());break;case"GET_TOKEN":window.dispatchEvent(new Event("beforeunload"));const r=document.body.appendChild(document.createElement("iframe")).contentWindow.localStorage;return r.token?o(JSON.parse(r.token)):o(null),!0}});
